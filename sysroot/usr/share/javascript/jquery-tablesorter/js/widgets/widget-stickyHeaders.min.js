!function(a,b){"use strict";function c(b,c){var d=isNaN(c.stickyHeaders_offset)?a(c.stickyHeaders_offset):[];return d.length?d.height()||0:parseInt(c.stickyHeaders_offset,10)||0}var d=a.tablesorter||{};a.extend(d.css,{sticky:"tablesorter-stickyHeader",stickyVis:"tablesorter-sticky-visible",stickyHide:"tablesorter-sticky-hidden",stickyWrap:"tablesorter-sticky-wrapper"}),d.addHeaderResizeEvent=function(b,c,d){if(b=a(b)[0],b.config){var e={timer:250},f=a.extend({},e,d),g=b.config,h=g.widgetOptions,i=function(a){var b,c,d,e,f,i,j=g.$headers.length;for(h.resize_flag=!0,c=[],b=0;b<j;b++)d=g.$headers.eq(b),e=d.data("savedSizes")||[0,0],f=d[0].offsetWidth,i=d[0].offsetHeight,f===e[0]&&i===e[1]||(d.data("savedSizes",[f,i]),c.push(d[0]));c.length&&!1!==a&&g.$table.triggerHandler("resize",[c]),h.resize_flag=!1};if(clearInterval(h.resize_timer),c)return h.resize_flag=!1,!1;i(!1),h.resize_timer=setInterval(function(){h.resize_flag||i()},f.timer)}},d.addWidget({id:"stickyHeaders",priority:54,options:{stickyHeaders:"",stickyHeaders_appendTo:null,stickyHeaders_attachTo:null,stickyHeaders_xScroll:null,stickyHeaders_yScroll:null,stickyHeaders_offset:0,stickyHeaders_filteredToTop:!0,stickyHeaders_cloneId:"-sticky",stickyHeaders_addResizeEvent:!0,stickyHeaders_includeCaption:!0,stickyHeaders_zIndex:2},format:function(e,f,g){if(!(f.$table.hasClass("hasStickyHeaders")||a.inArray("filter",f.widgets)>=0&&!f.$table.hasClass("hasFilters"))){var h,i,j,k,l=f.$table,m=a(g.stickyHeaders_attachTo),n=f.namespace+"stickyheaders ",o=a(g.stickyHeaders_yScroll||g.stickyHeaders_attachTo||b),p=a(g.stickyHeaders_xScroll||g.stickyHeaders_attachTo||b),q=l.children("thead:first"),r=q.children("tr").not(".sticky-false").children(),s=l.children("tfoot"),t=c(f,g),u=l.parent().closest("."+d.css.table).hasClass("hasStickyHeaders")?l.parent().closest("table.tablesorter")[0].config.widgetOptions.$sticky.parent():[],v=u.length?u.height():0,w=g.$sticky=l.clone().addClass("containsStickyHeaders "+d.css.sticky+" "+g.stickyHeaders+" "+f.namespace.slice(1)+"_extra_table").wrap('<div class="'+d.css.stickyWrap+'">'),x=w.parent().addClass(d.css.stickyHide).css({position:m.length?"absolute":"fixed",padding:parseInt(w.parent().parent().css("padding-left"),10),top:t+v,left:0,visibility:"hidden",zIndex:g.stickyHeaders_zIndex||2}),y=w.children("thead:first"),z="",A=function(a,c){var d,e,f,g,h,i=a.filter(":visible"),j=i.length;for(d=0;d<j;d++)g=c.filter(":visible").eq(d),h=i.eq(d),"border-box"===h.css("box-sizing")?e=h.outerWidth():"collapse"===g.css("border-collapse")?b.getComputedStyle?e=parseFloat(b.getComputedStyle(h[0],null).width):(f=parseFloat(h.css("border-width")),e=h.outerWidth()-parseFloat(h.css("padding-left"))-parseFloat(h.css("padding-right"))-f):e=h.width(),g.css({width:e,"min-width":e,"max-width":e})},B=function(){return m.length?parseInt(m.css("padding-left"),10)||0:l.offset().left-parseInt(l.css("margin-left"),10)-a(b).scrollLeft()},C=function(){x.css({left:B(),width:l.outerWidth()}),A(l,w),A(r,k)},D=function(b){if(l.is(":visible")){v=u.length?u.offset().top-o.scrollTop()+u.height():0;var e,h=l.offset(),i=c(f,g),j=a.isWindow(o[0]),k=m.length?j?o.scrollTop():o.offset().top:o.scrollTop(),n=g.stickyHeaders_includeCaption?0:l.children("caption").height()||0,p=k+i+v-n,q=l.height()-(x.height()+(s.height()||0))-n,r=p>h.top&&p<h.top+q?"visible":"hidden",t="visible"===r?d.css.stickyVis:d.css.stickyHide,w=!x.hasClass(t),y={visibility:r};m.length&&(w=!0,y.top=j?p-m.offset().top:m.scrollTop()),e=B(),e!==parseInt(x.css("left"),10)&&(w=!0,y.left=e),y.top=(y.top||0)+i+v,w&&x.removeClass(d.css.stickyVis+" "+d.css.stickyHide).addClass(t).css(y),(r!==z||b)&&(C(),z=r)}};if(m.length&&!m.css("position")&&m.css("position","relative"),w.attr("id")&&(w[0].id+=g.stickyHeaders_cloneId),w.find("thead:gt(0), tr.sticky-false").hide(),w.find("tbody, tfoot").remove(),w.find("caption").toggle(g.stickyHeaders_includeCaption),k=y.children().children(),w.css({height:0,width:0,margin:0}),k.find("."+d.css.resizer).remove(),l.addClass("hasStickyHeaders").bind("pagerComplete"+n,function(){C()}),d.bindEvents(e,y.children().children("."+d.css.header)),g.stickyHeaders_appendTo?a(g.stickyHeaders_appendTo).append(x):l.after(x),f.onRenderHeader)for(j=y.children("tr").children(),i=j.length,h=0;h<i;h++)f.onRenderHeader.apply(j.eq(h),[h,f,w]);p.add(o).unbind("scroll resize ".split(" ").join(n).replace(/\s+/g," ")).bind("scroll resize ".split(" ").join(n),function(a){D("resize"===a.type)}),f.$table.unbind("stickyHeadersUpdate"+n).bind("stickyHeadersUpdate"+n,function(){D(!0)}),g.stickyHeaders_addResizeEvent&&d.addHeaderResizeEvent(e),l.hasClass("hasFilters")&&g.filter_columnFilters&&(l.bind("filterEnd"+n,function(){var c=a(document.activeElement).closest("td"),e=c.parent().children().index(c);x.hasClass(d.css.stickyVis)&&g.stickyHeaders_filteredToTop&&(b.scrollTo(0,l.position().top),e>=0&&f.$filters&&f.$filters.eq(e).find("a, select, input").filter(":visible").focus())}),d.filter.bindSearch(l,k.find("."+d.css.filter)),g.filter_hideFilters&&d.filter.hideFilters(f,w)),g.stickyHeaders_addResizeEvent&&l.bind("resize"+f.namespace+"stickyheaders",function(){C()}),D(!0),l.triggerHandler("stickyHeadersInit")}},remove:function(c,e,f){var g=e.namespace+"stickyheaders ";e.$table.removeClass("hasStickyHeaders").unbind("pagerComplete resize filterEnd stickyHeadersUpdate ".split(" ").join(g).replace(/\s+/g," ")).next("."+d.css.stickyWrap).remove(),f.$sticky&&f.$sticky.length&&f.$sticky.remove(),a(b).add(f.stickyHeaders_xScroll).add(f.stickyHeaders_yScroll).add(f.stickyHeaders_attachTo).unbind("scroll resize ".split(" ").join(g).replace(/\s+/g," ")),d.addHeaderResizeEvent(c,!0)}})}(jQuery,window);